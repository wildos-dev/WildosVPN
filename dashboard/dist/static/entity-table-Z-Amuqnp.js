import{I as w,bT as y,bU as E,bV as P,bW as C,bX as D,F as N,bY as V,r as q,J as e,bZ as S,c0 as k,ai as z,c1 as B,c5 as I,c6 as R}from"./index-DPGZIZMG.js";function L({fetchEntity:m,columns:r,primaryFilter:g,rowSelection:f,entityKey:s,onCreate:o,onOpen:p}){var x,b;const{t:j}=w(),i=y({column:g}),t=E(),l=P(),h=C(),{onPaginationChange:F,pageIndex:c,pageSize:u}=D({entityKey:s}),T=[s,{page:c,size:u},i.columnFilters,{sortBy:((x=l.sorting[0])==null?void 0:x.id)||"created_at",desc:((b=l.sorting[0])==null?void 0:b.desc)||!0},{filters:t.columnsFilter}],{data:n,isFetching:d}=N({queryFn:m,queryKey:T,initialData:{entities:[],pageCount:1}}),a=V({data:n,columns:r,pageSize:u,pageIndex:c,rowSelection:f,visibility:h,sorting:l,onPaginationChange:F}),v=q.useMemo(()=>({entityKey:s,table:a,data:n.entities,primaryFilter:i,filters:t,isLoading:d}),[s,a,n.entities,t,i,d]);return e.jsx(S.Provider,{value:v,children:e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("div",{className:"flex flex-col md:flex-row-reverse items-center py-4 gap-2 w-full",children:[e.jsxs("div",{className:"flex flex-row items-center w-full",children:[e.jsx(k,{table:a}),o&&e.jsx(z,{"aria-label":`create-${s}`,onClick:o,children:j("create")})]}),e.jsx(B,{})]}),e.jsxs("div",{className:"w-full rounded-md border",children:[e.jsx(I,{columns:r,onRowClick:p}),e.jsx(R,{table:a})]})]})})}export{L as E};
